<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LoopRent | لیست کالاها</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    >
</head>
<body dir="rtl" class="bg-light">

    <div class="container py-5">
        <h1 class="mb-4 text-center fw-bold text-primary">لیست کالاهای موجود</h1>
        <form method="get" class="mb-4 text-center">
    <label for="category" class="form-label">دسته‌بندی:</label>
    <select name="category" id="category" class="form-select d-inline-block w-auto" onchange="this.form.submit()">
        <option value="">همه دسته‌ها</option>
        {% for cat in categories %}
            <option value="{{ cat.id }}" {% if selected_category == cat.id %}selected{% endif %}>
                {{ cat.name }}
            </option>
        {% endfor %}
    </select>
</form>

        <div class="row g-4">
            {% for item in items %}
            <div class="col-md-4">
                <div class="card shadow-sm h-100">
                    {% if item.image %}
                    <img src="{{ item.image.url }}" class="card-img-top" alt="{{ item.name }}">
                    {% endif %}
                    <div class="card-body">
    <h5 class="card-title">
        <a href="{% url 'item_detail' item.id %}" class="text-decoration-none">
            {{ item.name }}
        </a>
    </h5>

    <p class="card-text text-muted">{{ item.description|truncatewords:20 }}</p>

    <!-- توجه: نام فیلد قیمت در مدل شما price_per_day است -->
    <p class="fw-bold text-success">💰 {{ item.price_per_day }} تومان در روز</p>

    <a href="{% url 'item_detail' item.id %}" class="btn btn-sm btn-outline-primary mt-2">مشاهده و درخواست اجاره</a>
</div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

</body>
</html>
